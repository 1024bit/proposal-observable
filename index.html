<!doctype html>
<head><meta charset="utf-8">
<title>Observable</title><script type="application/json" id="menu-search-biblio">[{"type":"clause","id":"observable","aoid":null,"title":"Observable ( subscriber )","titleHTML":"Observable ( <var>subscriber</var> )","number":"1.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable ( subscriber )"},{"type":"clause","id":"observable-constructor","aoid":null,"title":"The Observable Constructor","titleHTML":"The Observable Constructor","number":"1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"The Observable Constructor"},{"type":"clause","id":"observable-prototype","aoid":null,"title":"Observable.prototype","titleHTML":"Observable.prototype","number":"2.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.prototype"},{"type":"clause","id":"observable-from-delegating-functions","aoid":null,"title":"Observable.from Delegating Functions","titleHTML":"Observable.from Delegating Functions","number":"2.2.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.from Delegating Functions"},{"type":"clause","id":"observable-from-iteration-functions","aoid":null,"title":"Observable.from Iteration Functions","titleHTML":"Observable.from Iteration Functions","number":"2.2.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.from Iteration Functions"},{"type":"clause","id":"observable-from","aoid":null,"title":"Observable.from ( x )","titleHTML":"Observable.from ( <var>x</var> )","number":"2.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.from ( x )"},{"type":"clause","id":"observable-of-subscriber-functions","aoid":null,"title":"Observable.of Subscriber Functions","titleHTML":"Observable.of Subscriber Functions","number":"2.3.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.of Subscriber Functions"},{"type":"clause","id":"observable-of","aoid":null,"title":"Observable.of ( ...items )","titleHTML":"Observable.of ( ...<var>items</var> )","number":"2.3","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.of ( ...items )"},{"type":"clause","id":"observable-properties","aoid":null,"title":"Properties of the Observable Constructor","titleHTML":"Properties of the Observable Constructor","number":"2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Properties of the Observable Constructor"},{"type":"op","aoid":"ExecuteSubscriber","refId":"observable-execute-subscriber","location":"","key":"ExecuteSubscriber"},{"type":"clause","id":"observable-execute-subscriber","aoid":"ExecuteSubscriber","title":"ExecuteSubscriber ( subscriber, observer )","titleHTML":"ExecuteSubscriber ( <var>subscriber</var>, <var>observer</var> )","number":"3.1.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"ExecuteSubscriber ( subscriber, observer )"},{"type":"clause","id":"observable-subscription-cleanup-functions","aoid":null,"title":"Subscription Cleanup Functions","titleHTML":"Subscription Cleanup Functions","number":"3.1.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Subscription Cleanup Functions"},{"type":"clause","id":"observable-prototype-subscribe","aoid":null,"title":"Observable.prototype.subscribe ( observer )","titleHTML":"Observable.prototype.subscribe ( <var>observer</var> )","number":"3.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.prototype.subscribe ( observer )"},{"type":"clause","id":"observable-prototype-constructor","aoid":null,"title":"Observable.prototype.constructor","titleHTML":"Observable.prototype.constructor","number":"3.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.prototype.constructor"},{"type":"clause","id":"observable-prototype-@@observable","aoid":null,"title":"Observable.prototype [ @@observable ] ( )","titleHTML":"Observable.prototype [ @@observable ] ( )","number":"3.3","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Observable.prototype [ @@observable ] ( )"},{"type":"clause","id":"observable-prototype-properties","aoid":null,"title":"Properties of the Observable Prototype Object","titleHTML":"Properties of the Observable Prototype Object","number":"3","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Properties of the Observable Prototype Object"},{"type":"op","aoid":"CreateSubscription","refId":"create-subscription","location":"","key":"CreateSubscription"},{"type":"clause","id":"create-subscription","aoid":"CreateSubscription","title":"CreateSubscription ( observer )","titleHTML":"CreateSubscription ( <var>observer</var> )","number":"4.1.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"CreateSubscription ( observer )"},{"type":"op","aoid":"CleanupSubscription","refId":"cleanup-subscription","location":"","key":"CleanupSubscription"},{"type":"clause","id":"cleanup-subscription","aoid":"CleanupSubscription","title":"CleanupSubscription ( subscription )","titleHTML":"CleanupSubscription ( <var>subscription</var> )","number":"4.1.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"CleanupSubscription ( subscription )"},{"type":"op","aoid":"SubscriptionClosed","refId":"subscription-closed","location":"","key":"SubscriptionClosed"},{"type":"clause","id":"subscription-closed","aoid":"SubscriptionClosed","title":"SubscriptionClosed ( subscription )","titleHTML":"SubscriptionClosed ( <var>subscription</var> )","number":"4.1.3","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"SubscriptionClosed ( subscription )"},{"type":"clause","id":"subscription-abstract-operations","aoid":null,"title":"Subscription Abstract Operations","titleHTML":"Subscription Abstract Operations","number":"4.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Subscription Abstract Operations"},{"type":"clause","id":"subscription-prototype-closed","aoid":null,"title":"get %SubscriptionPrototype%.closed","titleHTML":"get %SubscriptionPrototype%.closed","number":"4.2.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"get %SubscriptionPrototype%.closed"},{"type":"clause","id":"subscription-prototype-unsubscribe","aoid":null,"title":"%SubscriptionPrototype%.unsubscribe ( )","titleHTML":"%SubscriptionPrototype%.unsubscribe ( )","number":"4.2.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"%SubscriptionPrototype%.unsubscribe ( )"},{"type":"clause","id":"subscription-prototype-object","aoid":null,"title":"The %SubscriptionPrototype% Object","titleHTML":"The %SubscriptionPrototype% Object","number":"4.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"The %SubscriptionPrototype% Object"},{"type":"clause","id":"subscription-objects","aoid":null,"title":"Subscription Objects","titleHTML":"Subscription Objects","number":"4","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Subscription Objects"},{"type":"op","aoid":"CreateSubscriptionObserver","refId":"create-subscription-observer","location":"","key":"CreateSubscriptionObserver"},{"type":"clause","id":"create-subscription-observer","aoid":"CreateSubscriptionObserver","title":"CreateSubscriptionObserver ( subscription )","titleHTML":"CreateSubscriptionObserver ( <var>subscription</var> )","number":"5.1.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"CreateSubscriptionObserver ( subscription )"},{"type":"clause","id":"subscription-observer-abstract-operations","aoid":null,"title":"Subscription Observer Abstract Operations","titleHTML":"Subscription Observer Abstract Operations","number":"5.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Subscription Observer Abstract Operations"},{"type":"clause","id":"subscription-observer-prototype-closed","aoid":null,"title":"get %SubscriptionObserverPrototype%.closed","titleHTML":"get %SubscriptionObserverPrototype%.closed","number":"5.2.1","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"get %SubscriptionObserverPrototype%.closed"},{"type":"clause","id":"subscription-observer-prototype-next","aoid":null,"title":"%SubscriptionObserverPrototype%.next ( value )","titleHTML":"%SubscriptionObserverPrototype%.next ( <var>value</var> )","number":"5.2.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"%SubscriptionObserverPrototype%.next ( value )"},{"type":"clause","id":"subscription-observer-prototype-error","aoid":null,"title":"%SubscriptionObserverPrototype%.error ( exception )","titleHTML":"%SubscriptionObserverPrototype%.error ( <var>exception</var> )","number":"5.2.3","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"%SubscriptionObserverPrototype%.error ( exception )"},{"type":"clause","id":"subscription-observer-prototype-complete","aoid":null,"title":"%SubscriptionObserverPrototype%.complete ( value )","titleHTML":"%SubscriptionObserverPrototype%.complete ( <var>value</var> )","number":"5.2.4","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"%SubscriptionObserverPrototype%.complete ( value )"},{"type":"clause","id":"subscription-observer-prototype-object","aoid":null,"title":"The %SubscriptionObserverPrototype% Object","titleHTML":"The %SubscriptionObserverPrototype% Object","number":"5.2","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"The %SubscriptionObserverPrototype% Object"},{"type":"clause","id":"subscription-observer-objects","aoid":null,"title":"Subscription Observer Objects","titleHTML":"Subscription Observer Objects","number":"5","namespace":"https://github.com/zenparsing/es-observable","location":"","key":"Subscription Observer Objects"}]</script></head><body><div id="menu-toggle">☰</div><div id="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pinned Clauses</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle">◢</span><a href="#observable-constructor" title="The Observable Constructor"><span class="secnum">1</span> The Observable Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#observable" title="Observable ( subscriber )"><span class="secnum">1.1</span> Observable ( <var>subscriber</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#observable-properties" title="Properties of the Observable Constructor"><span class="secnum">2</span> Properties of the Observable Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#observable-prototype" title="Observable.prototype"><span class="secnum">2.1</span> Observable.prototype</a></li><li><span class="item-toggle">◢</span><a href="#observable-from" title="Observable.from ( x )"><span class="secnum">2.2</span> Observable.from ( <var>x</var> )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#observable-from-delegating-functions" title="Observable.from Delegating Functions"><span class="secnum">2.2.1</span> Observable.from Delegating Functions</a></li><li><span class="item-toggle-none"></span><a href="#observable-from-iteration-functions" title="Observable.from Iteration Functions"><span class="secnum">2.2.2</span> Observable.from Iteration Functions</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#observable-of" title="Observable.of ( ...items )"><span class="secnum">2.3</span> Observable.of ( ...<var>items</var> )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#observable-of-subscriber-functions" title="Observable.of Subscriber Functions"><span class="secnum">2.3.1</span> Observable.of Subscriber Functions</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#observable-prototype-properties" title="Properties of the Observable Prototype Object"><span class="secnum">3</span> Properties of the Observable Prototype Object</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#observable-prototype-subscribe" title="Observable.prototype.subscribe ( observer )"><span class="secnum">3.1</span> Observable.prototype.subscribe ( <var>observer</var> )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#observable-execute-subscriber" title="ExecuteSubscriber ( subscriber, observer )"><span class="secnum">3.1.1</span> ExecuteSubscriber ( <var>subscriber</var>, <var>observer</var> )</a></li><li><span class="item-toggle-none"></span><a href="#observable-subscription-cleanup-functions" title="Subscription Cleanup Functions"><span class="secnum">3.1.2</span> Subscription Cleanup Functions</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#observable-prototype-constructor" title="Observable.prototype.constructor"><span class="secnum">3.2</span> Observable.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#observable-prototype-@@observable" title="Observable.prototype [ @@observable ] ( )"><span class="secnum">3.3</span> Observable.prototype [ @@observable ] ( )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#subscription-objects" title="Subscription Objects"><span class="secnum">4</span> Subscription Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#subscription-abstract-operations" title="Subscription Abstract Operations"><span class="secnum">4.1</span> Subscription Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#create-subscription" title="CreateSubscription ( observer )"><span class="secnum">4.1.1</span> CreateSubscription ( <var>observer</var> )</a></li><li><span class="item-toggle-none"></span><a href="#cleanup-subscription" title="CleanupSubscription ( subscription )"><span class="secnum">4.1.2</span> CleanupSubscription ( <var>subscription</var> )</a></li><li><span class="item-toggle-none"></span><a href="#subscription-closed" title="SubscriptionClosed ( subscription )"><span class="secnum">4.1.3</span> SubscriptionClosed ( <var>subscription</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#subscription-prototype-object" title="The %SubscriptionPrototype% Object"><span class="secnum">4.2</span> The %SubscriptionPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#subscription-prototype-closed" title="get %SubscriptionPrototype%.closed"><span class="secnum">4.2.1</span> get %SubscriptionPrototype%.closed</a></li><li><span class="item-toggle-none"></span><a href="#subscription-prototype-unsubscribe" title="%SubscriptionPrototype%.unsubscribe ( )"><span class="secnum">4.2.2</span> %SubscriptionPrototype%.unsubscribe ( )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#subscription-observer-objects" title="Subscription Observer Objects"><span class="secnum">5</span> Subscription Observer Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#subscription-observer-abstract-operations" title="Subscription Observer Abstract Operations"><span class="secnum">5.1</span> Subscription Observer Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#create-subscription-observer" title="CreateSubscriptionObserver ( subscription )"><span class="secnum">5.1.1</span> CreateSubscriptionObserver ( <var>subscription</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#subscription-observer-prototype-object" title="The %SubscriptionObserverPrototype% Object"><span class="secnum">5.2</span> The %SubscriptionObserverPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#subscription-observer-prototype-closed" title="get %SubscriptionObserverPrototype%.closed"><span class="secnum">5.2.1</span> get %SubscriptionObserverPrototype%.closed</a></li><li><span class="item-toggle-none"></span><a href="#subscription-observer-prototype-next" title="%SubscriptionObserverPrototype%.next ( value )"><span class="secnum">5.2.2</span> %SubscriptionObserverPrototype%.next ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#subscription-observer-prototype-error" title="%SubscriptionObserverPrototype%.error ( exception )"><span class="secnum">5.2.3</span> %SubscriptionObserverPrototype%.error ( <var>exception</var> )</a></li><li><span class="item-toggle-none"></span><a href="#subscription-observer-prototype-complete" title="%SubscriptionObserverPrototype%.complete ( value )"><span class="secnum">5.2.4</span> %SubscriptionObserverPrototype%.complete ( <var>value</var> )</a></li></ol></li></ol></li></ol></div></div><div id="spec-container"><h1 class="version">Stage 1 Draft / December 5, 2016</h1><h1 class="title">Observable</h1>
<script src="ecmarkup.js" defer=""></script>
<link rel="stylesheet" href="ecmarkup.css">

<emu-clause id="observable-constructor">
  <h1><span class="secnum">1</span>The Observable Constructor<span class="utils"><span class="anchor"><a href="#observable-constructor">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The Observable constructor is the %Observable% intrinsic object and the initial value of the Observable property of the <emu-xref href="#global-object"><a href="https://tc39.github.io/ecma262/#global-object">global object</a></emu-xref>. When called as a constructor it creates and initializes a new Observable object. Observable is not intended to be called as a function and will throw an exception when called in that manner.</p>

  <p>The Observable constructor is designed to be subclassable. It may be used as the value in an extends clause of a class definition. Subclass constructors that intend to inherit the specified Observable behaviour must include a super call to the Observable constructor to create and initialize the subclass instance with the internal state necessary to support the Observable and Observable.prototype built-in methods.</p>

  <emu-clause id="observable">
    <h1><span class="secnum">1.1</span>Observable ( <var>subscriber</var> )<span class="utils"><span class="anchor"><a href="#observable">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>The <code>Observable</code> constructor initializes a new Observable object.  It is not intended to be called as a function and will throw an exception when called in that manner.</p>

    <p>The <var>subscriber</var> argument must be a function object.  It is called each time the <code>subscribe</code> method of the Observable object is invoked.  The <var>subscriber</var> function is called with a wrapped observer object and may optionally return a function which will cancel the subscription.</p>

    <p>The <code>Observable</code> constructor performs the following steps:</p>

    <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.github.io/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>subscriber</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>observable</var> be ? <emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.github.io/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, %ObservablePrototype%, «‍ [[Subscriber]] »).</li><li>Set <var>observable's</var> [[Subscriber]] internal slot to <var>subscriber</var>.</li><li>Return <var>observable</var>.
    </li></ol></emu-alg>
  </emu-clause>

</emu-clause>

<emu-clause id="observable-properties">
  <h1><span class="secnum">2</span>Properties of the Observable Constructor<span class="utils"><span class="anchor"><a href="#observable-properties">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The value of the [[Prototype]] internal slot of the <code>Observable</code> constructor is the intrinsic object <emu-xref href="#sec-properties-of-the-function-constructor"><a href="https://tc39.github.io/ecma262/#sec-properties-of-the-function-constructor">%FunctionPrototype%</a></emu-xref>.</p>

  <p>Besides the <code>length</code> property (whose value is 1), the <code>Observable</code> constructor has the following properties:</p>

  <emu-import href="./constructor-properties.html"><emu-clause id="observable-prototype">
  <h1><span class="secnum">2.1</span>Observable.prototype<span class="utils"><span class="anchor"><a href="#observable-prototype">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The initial value of <code>Observable.prototype</code> is the intrinsic object %ObservablePrototype%.</p>

  <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
</emu-clause>

<emu-clause id="observable-from">
  <h1><span class="secnum">2.2</span>Observable.from ( <var>x</var> )<span class="utils"><span class="anchor"><a href="#observable-from">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>When the <code>from</code> method is called, the following steps are taken:</p>

  <emu-alg><ol><li>Let <var>C</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="IsConstructor"><a href="https://tc39.github.io/ecma262/#sec-isconstructor">IsConstructor</a></emu-xref>(C) is <emu-val>false</emu-val>, let <var>C</var> be %Observable%.</li><li>Let <var>observableMethod</var> be ? <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>x</var>, <code>@@observable</code>).</li><li>If <var>observableMethod</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>observable</var> be ? <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>observableMethod</var>, <var>x</var>, «‍ »).</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observable</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>constructor</var> be ? <emu-xref aoid="Get"><a href="https://tc39.github.io/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>observable</var>, <code>"constructor"</code>).</li><li>If <emu-xref aoid="SameValue"><a href="https://tc39.github.io/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>constructor</var>, <var>C</var>) is <emu-val>true</emu-val>, return <var>observable</var>.</li><li>Let <var>subscriber</var> be a new built-in function object as defined in Observable.from Delegating Functions.</li><li>Set <var>subscriber</var>'s [[Observable]] internal slot to <var>observable</var>.</li></ol></li><li>Else,<ol><li>Let <var>iteratorMethod</var> be ? <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>x</var>, <code>@@observable</code>).</li><li>If <var>iteratorMethod</var> is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>subscriber</var> be a new built-in function object as defined in Observable.from Iteration Functions.</li><li>Set <var>subscriber</var>'s [[Iterable]] internal slot to <var>x</var>.</li><li>Set <var>subscriber</var>'s [[IteratorMethod]] internal slot to <var>iteratorMethod</var>.</li></ol></li><li>Return <emu-xref aoid="Construct"><a href="https://tc39.github.io/ecma262/#sec-construct">Construct</a></emu-xref>(<var>C</var>, « ‍<var>subscriber</var> »).
  </li></ol></emu-alg>

  <emu-clause id="observable-from-delegating-functions">
    <h1><span class="secnum">2.2.1</span>Observable.from Delegating Functions<span class="utils"><span class="anchor"><a href="#observable-from-delegating-functions">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>An Observable.from delegating function is an anonymous built-in function that has an [[Observable]] internal slot.</p>

    <p>When an Observable.from delegating function is called with argument <var>observer</var>, the following steps are taken:</p>

    <emu-alg><ol><li>Let <var>observable</var> be the value of the [[Observable]] internal slot of <var>F</var>.</li><li>Return <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>observable</var>, <code>"subscribe"</code>, « ‍<var>observer</var> »).
    </li></ol></emu-alg>

    <p>The <code>length</code> property of an Observable.from delegating function is <code>1</code>.</p>
  </emu-clause>

  <emu-clause id="observable-from-iteration-functions">
    <h1><span class="secnum">2.2.2</span>Observable.from Iteration Functions<span class="utils"><span class="anchor"><a href="#observable-from-iteration-functions">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>An Observable.from iteration function is an anonymous built-in function that has [[Iterable]] and [[IteratorFunction]] internal slots.</p>

    <p>When an Observable.from iteration function is called with argument <var>observer</var>, the following steps are taken:</p>

    <emu-alg><ol><li>Let <var>iterable</var> be the value of the [[Iterable]] internal slot of <var>F</var>.</li><li>Let <var>iteratorMethod</var> be the value of the [[IteratorMethod]] internal slot of <var>F</var>.</li><li>Let <var>iterator</var> be ? <emu-xref aoid="GetIterator"><a href="https://tc39.github.io/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>items</var>, <var>iteratorMethod</var>).</li><li>Repeat<ol><li>Let <var>next</var> be ? <emu-xref aoid="IteratorStep"><a href="https://tc39.github.io/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iterator</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, then<ol><li>Perform ? <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>observer</var>, <code>"complete"</code>, «‍ »).</li><li>Return <emu-val>undefined</emu-val>.</li></ol></li><li>Let <var>nextValue</var> be ? <emu-xref aoid="IteratorValue"><a href="https://tc39.github.io/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>result</var> be <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>observer</var>, <code>"next"</code>, « ‍<var>nextValue</var> »).</li><li>If <var>result</var> in an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Return ? <emu-xref aoid="IteratorClose"><a href="https://tc39.github.io/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iterator</var>, <var>result</var>).
    </li></ol></li></ol></li></ol></emu-alg>

    <p>The <code>length</code> property of an Observable.from iteration function is <code>1</code>.</p>
  </emu-clause>

</emu-clause>

<emu-clause id="observable-of">
  <h1><span class="secnum">2.3</span>Observable.of ( ...<var>items</var> )<span class="utils"><span class="anchor"><a href="#observable-of">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <emu-alg><ol><li>Let <var>C</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="IsConstructor"><a href="https://tc39.github.io/ecma262/#sec-isconstructor">IsConstructor</a></emu-xref>(C) is <emu-val>false</emu-val>, let <var>C</var> be %Observable%.</li><li>Let <var>subscriber</var> be a new built-in function object as defined in Observable.of Subscriber Functions.</li><li>Set <var>subscriber</var>'s [[Items]] internal slot to <var>items</var>.</li><li>Return <emu-xref aoid="Construct"><a href="https://tc39.github.io/ecma262/#sec-construct">Construct</a></emu-xref>(<var>C</var>, « ‍<var>subscriber</var> »).
  </li></ol></emu-alg>

  <emu-clause id="observable-of-subscriber-functions">
    <h1><span class="secnum">2.3.1</span>Observable.of Subscriber Functions<span class="utils"><span class="anchor"><a href="#observable-of-subscriber-functions">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>An Observable.of subscriber function is an anonymous built-in function that has an [[Items]] internal slot.</p>

    <p>When an Observable.of subscriber function is called with argument <var>observer</var>, the following steps are taken:</p>

    <emu-alg><ol><li>Let <var>items</var> be the value of the [[Items]] internal slot of <var>F</var>.</li><li>For each element <var>value</var> of <var>items</var><ol><li>Perform ? <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>observer</var>, <code>"next"</code>, « ‍<var>value</var> »).</li></ol></li><li>Perform ? <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>observer</var>, <code>"complete"</code>, «‍ »).</li><li>Return <emu-val>undefined</emu-val>.
    </li></ol></emu-alg>

    <p>The <code>length</code> property of an Observable.of subscriber function is <code>1</code>.</p>
  </emu-clause>

</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="observable-prototype-properties">
  <h1><span class="secnum">3</span>Properties of the Observable Prototype Object<span class="utils"><span class="anchor"><a href="#observable-prototype-properties">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The <code>Observable</code> prototype object is the intrinsic object %ObservablePrototype%. The value of the [[Prototype]] internal slot of the <code>Observable</code> prototype object is the intrinsic object <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.github.io/ecma262/#sec-properties-of-the-object-prototype-object">%ObjectPrototype%</a></emu-xref>. The <code>Observable</code> prototype object is an ordinary object.</p>

  <emu-import href="./prototype-properties.html"><emu-clause id="observable-prototype-subscribe">
  <h1><span class="secnum">3.1</span>Observable.prototype.subscribe ( <var>observer</var> )<span class="utils"><span class="anchor"><a href="#observable-prototype-subscribe">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The <code>subscribe</code> function begins sending values to the supplied <var>observer</var> object by executing the Observable object's subscriber function.  It returns a <code>Subscription</code> object which may be used to cancel the subscription.</p>

  <p>The <code>subscribe</code> function performs the following steps:</p>

  <emu-alg><ol><li>Let <var>O</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>O</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>O</var> does not have an [[Subscriber]] internal slot, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observer</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.github.io/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>observer</var>) is <emu-val>true</emu-val>, then<ol><li>Let <var>len</var> be the actual number of arguments passed to this function.</li><li>Let <var>args</var> be the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of arguments passed to this function.</li><li>Let <var>nextCallback</var> be <var>observer</var>.</li><li>If <var>len</var> &gt; 1, let <var>errorCallback</var> be <var>args</var>[1].</li><li>Else, let <var>errorCallback</var> be <emu-val>undefined</emu-val>.</li><li>If <var>len</var> &gt; 2, let <var>completeCallback</var> be <var>args</var>[2].</li><li>Else, let <var>completeCallback</var> be <emu-val>undefined</emu-val>.</li><li>Let <var>observer</var> be <emu-xref aoid="ObjectCreate"><a href="https://tc39.github.io/ecma262/#sec-objectcreate">ObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.github.io/ecma262/#sec-properties-of-the-object-prototype-object">%ObjectPrototype%</a></emu-xref>).</li><li>Perform ! <emu-xref aoid="CreateDataProperty"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>observer</var>, <code>"next"</code>, <var>nextCallback</var>).</li><li>Perform ! <emu-xref aoid="CreateDataProperty"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>observer</var>, <code>"error"</code>, <var>errorCallback</var>).</li><li>Perform ! <emu-xref aoid="CreateDataProperty"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>observer</var>, <code>"complete"</code>, <var>completeCallback</var>).</li></ol></li><li>Let <var>subscription</var> be ? <emu-xref aoid="CreateSubscription"><a href="#create-subscription">CreateSubscription</a></emu-xref>(<var>observer</var>).</li><li>Let <var>start</var> be ? <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>observer</var>, <code>"start"</code>).</li><li>If <var>start</var> is not **undefined**, then<ol><li>Perform ? <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>start</var>, <var>observer</var>, « <var>subscription</var> »).</li><li>If <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>) is <emu-val>true</emu-val>, then<ol><li>Return <var>subscription</var>.</li></ol></li></ol></li><li>Let <var>subscriptionObserver</var> be ? <emu-xref aoid="CreateSubscriptionObserver"><a href="#create-subscription-observer">CreateSubscriptionObserver</a></emu-xref>(<var>subscription</var>).</li><li>Let <var>subscriber</var> be the value of <var>O's</var> [[Subscriber]] internal slot.</li><li>Assert: <emu-xref aoid="IsCallable"><a href="https://tc39.github.io/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>subscriber</var>) is <emu-val>true</emu-val>.</li><li>Let <var>subscriberResult</var> be <emu-xref aoid="ExecuteSubscriber"><a href="#observable-execute-subscriber">ExecuteSubscriber</a></emu-xref>(<var>subscriber</var>, <var>subscriptionObserver</var>).</li><li>If <var>subscriberResult</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Perform ? <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>subscriptionObserver</var>, <code>"error"</code>, « ‍<var>subscriberResult</var>.[[value]] »).</li></ol></li><li>Else,<ol><li>Set the [[Cleanup]] internal slot of <var>observer</var> to <var>subscriberResult</var>.[[value]].</li></ol></li><li>If <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>) is <emu-val>true</emu-val>, then<ol><li>Perform ? <emu-xref aoid="CleanupSubscription"><a href="#cleanup-subscription">CleanupSubscription</a></emu-xref>(<var>subscription</var>).</li></ol></li><li>Return <var>subscription</var>.
  </li></ol></emu-alg>

  <emu-clause id="observable-execute-subscriber" aoid="ExecuteSubscriber">
    <h1><span class="secnum">3.1.1</span>ExecuteSubscriber ( <var>subscriber</var>, <var>observer</var> )<span class="utils"><span class="anchor"><a href="#observable-execute-subscriber">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>The abstract operation ExecuteSubscriber with arguments <var>subscriber</var> and <var>observer</var> performs the following steps:</p>

    <emu-alg><ol><li>Assert: <emu-xref aoid="IsCallable"><a href="https://tc39.github.io/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>subscriber</var>) is <emu-val>true</emu-val>.</li><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observer</var>) is Object.</li><li>Let <var>subscriberResult</var> be ? <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>subscriber</var>, <emu-val>undefined</emu-val>, <var>observer</var>).</li><li>If <var>subscriberResult</var> is <emu-val>null</emu-val> or <emu-val>undefined</emu-val>, return <emu-val>undefined</emu-val>.</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.github.io/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>subscriberResult</var>) is <emu-val>true</emu-val>, return <var>subscriberResult</var>.</li><li>Let <var>result</var> be ? <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>subscriberResult</var>, <code>"unsubscribe"</code>).</li><li>If <var>result</var> is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>cleanupFunction</var> be a new built-in function object as defined in Subscription Cleanup Functions.</li><li>Set <var>cleanupFunction</var>'s [[Subscription]] internal slot to <var>subscriberResult</var>.</li><li>Return <var>cleanupFunction</var>.
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="observable-subscription-cleanup-functions">
    <h1><span class="secnum">3.1.2</span>Subscription Cleanup Functions<span class="utils"><span class="anchor"><a href="#observable-subscription-cleanup-functions">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>A subscription cleanup function is an anonymous built-in function that has a [[Subscription]] internal slot.</p>

    <p>When a subscription cleanup function <var>F</var> is called the following steps are taken:</p>

    <emu-alg><ol><li>Assert: <var>F</var> as a [[Subscription]] internal slot whose value is an Object.</li><li>Let <var>subscription</var> be the value of <var>F</var>'s [[Subscription]] internal slot.</li><li>Return <emu-xref aoid="Invoke"><a href="https://tc39.github.io/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>subscription</var>, <code>"unsubscribe"</code>, « ‍»).
    </li></ol></emu-alg>

    <p>The <code>length</code> property of a subscription cleanup function is <code>0</code>.</p>
  </emu-clause>

</emu-clause>

<emu-clause id="observable-prototype-constructor">
  <h1><span class="secnum">3.2</span>Observable.prototype.constructor<span class="utils"><span class="anchor"><a href="#observable-prototype-constructor">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The initial value of <code>Observable.prototype.constructor</code> is the intrinsic object %Observable%.</p>
</emu-clause>

<emu-clause id="observable-prototype-@@observable">
  <h1><span class="secnum">3.3</span>Observable.prototype [ @@observable ] ( )<span class="utils"><span class="anchor"><a href="#observable-prototype-@@observable">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>The following steps are taken:</p>

  <emu-alg><ol><li>Return the <emu-val>this</emu-val> value.
  </li></ol></emu-alg>

  <p>The value of the <code>name</code> property of this function is <code>"[Symbol.observable]"</code>.</p>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="subscription-objects">
  <h1><span class="secnum">4</span>Subscription Objects<span class="utils"><span class="anchor"><a href="#subscription-objects">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>A Subscription is an object which represents a channel through which an Observable may send data to an Observer.</p>

  <emu-import href="./subscription.html"><emu-clause id="subscription-abstract-operations">
  <h1><span class="secnum">4.1</span>Subscription Abstract Operations<span class="utils"><span class="anchor"><a href="#subscription-abstract-operations">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <emu-clause id="create-subscription" aoid="CreateSubscription">
    <h1><span class="secnum">4.1.1</span>CreateSubscription ( <var>observer</var> )<span class="utils"><span class="anchor"><a href="#create-subscription">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>The abstract operation CreateSubscription with argument <var>observer</var> is used to create a Subscription object.  It performs the following steps:</p>

    <emu-alg><ol><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observer</var>) is Object.</li><li>Let <var>subscription</var> be <emu-xref aoid="ObjectCreate"><a href="https://tc39.github.io/ecma262/#sec-objectcreate">ObjectCreate</a></emu-xref>(%SubscriptionPrototype%, «‍ [[Observer]], [[Cleanup]] »).</li><li>Set <var>subscription</var>'s [[Observer]] internal slot to <var>observer</var>.</li><li>Set <var>subscription</var>'s [[Cleanup]] internal slot to <emu-val>undefined</emu-val>.</li><li>Return <var>subscription</var>.
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="cleanup-subscription" aoid="CleanupSubscription">
    <h1><span class="secnum">4.1.2</span>CleanupSubscription ( <var>subscription</var> )<span class="utils"><span class="anchor"><a href="#cleanup-subscription">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>The abstract operation CleanupSubscription with argument <var>subscription</var> performs the following steps:</p>

    <emu-alg><ol><li>Assert: <var>subscription</var> is a Subscription object.</li><li>Let <var>cleanup</var> be the value of <var>subscription</var>'s [[Cleanup]] internal slot.</li><li>If <var>cleanup</var> is <emu-val>undefined</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Assert: <emu-xref aoid="IsCallable"><a href="https://tc39.github.io/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>cleanup</var>) is <emu-val>true</emu-val>.</li><li>Set <var>subscription</var>'s [[Cleanup]] internal slot to <emu-val>undefined</emu-val>.</li><li>Perform ? <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>cleanup</var>, <emu-val>undefined</emu-val>, «‍ »).</li><li>Return <emu-val>undefined</emu-val>.
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="subscription-closed" aoid="SubscriptionClosed">
    <h1><span class="secnum">4.1.3</span>SubscriptionClosed ( <var>subscription</var> )<span class="utils"><span class="anchor"><a href="#subscription-closed">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>The abstract operation SubscriptionClosed with argument <var>subscription</var> performs the following steps:</p>

    <emu-alg><ol><li>Assert: <var>subscription</var> is a Subscription object.</li><li>If the value of <var>subscription</var>'s [[Observer]] internal slot is <emu-val>undefined</emu-val>, return <emu-val>true</emu-val>.</li><li>Else, return <emu-val>false</emu-val>.
    </li></ol></emu-alg>
  </emu-clause>

</emu-clause>

<emu-clause id="subscription-prototype-object">
  <h1><span class="secnum">4.2</span>The %SubscriptionPrototype% Object<span class="utils"><span class="anchor"><a href="#subscription-prototype-object">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>All Subscription objects inherit properties from the %SubscriptionPrototype% intrinsic object.  The %SubscriptionPrototype% object is an ordinary object and its [[Prototype]] internal slot is the <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.github.io/ecma262/#sec-properties-of-the-object-prototype-object">%ObjectPrototype%</a></emu-xref> intrinsic object. In addition, %SubscriptionPrototype% has the following properties:</p>

  <emu-clause id="subscription-prototype-closed">
    <h1><span class="secnum">4.2.1</span>get %SubscriptionPrototype%.closed<span class="utils"><span class="anchor"><a href="#subscription-prototype-closed">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>
    <emu-alg><ol><li>Let <var>subscription</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>subscription</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>subscription</var> does not have all of the internal slots of a Subscription instance, throw a <emu-val>TypeError</emu-val> exception.</li><li>Return ! <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="subscription-prototype-unsubscribe">
    <h1><span class="secnum">4.2.2</span>%SubscriptionPrototype%.unsubscribe ( )<span class="utils"><span class="anchor"><a href="#subscription-prototype-unsubscribe">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>
    <emu-alg><ol><li>Let <var>subscription</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>subscription</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>subscription</var> does not have all of the internal slots of a Subscription instance, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>subscription</var>'s [[Observer]] internal slot to <emu-val>undefined</emu-val>.</li><li>Return <emu-xref aoid="CleanupSubscription"><a href="#cleanup-subscription">CleanupSubscription</a></emu-xref>(<var>subscription</var>).
    </li></ol></emu-alg>
  </emu-clause>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="subscription-observer-objects">
  <h1><span class="secnum">5</span>Subscription Observer Objects<span class="utils"><span class="anchor"><a href="#subscription-observer-objects">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>A Subscription Observer is an object which wraps the <var>observer</var> argument supplied to the  <code>subscribe</code> method of Observable objects.  Subscription Observer objects are passed as the single parameter to an observable's <var>subscriber</var> function.  They enforce the following guarantees:</p>

  <ul>
    <li>If the observer's <code>error</code> method is called, the observer will not be invoked again and the observable's cleanup function will be called.</li>
    <li>If the observer's <code>complete</code> method is called, the observer will not be invoked again and the observable's cleanup function will be called.</li>
    <li>When the subscription is canceled, the observer will not be invoked again.</li>
  </ul>

  <p>In addition, Subscription Observer objects provide default behaviors when the observer does not implement <code>next</code>, <code>error</code> or <code>complete</code>.</p>

  <emu-import href="./subscription-observer.html"><emu-clause id="subscription-observer-abstract-operations">
  <h1><span class="secnum">5.1</span>Subscription Observer Abstract Operations<span class="utils"><span class="anchor"><a href="#subscription-observer-abstract-operations">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <emu-clause id="create-subscription-observer" aoid="CreateSubscriptionObserver">
    <h1><span class="secnum">5.1.1</span>CreateSubscriptionObserver ( <var>subscription</var> )<span class="utils"><span class="anchor"><a href="#create-subscription-observer">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

    <p>The abstract operation CreateSubscriptionObserver with argument <var>observer</var> is used to create a normalized observer which can be supplied to an observable's subscriber function.  It performs the following steps:</p>

    <emu-alg><ol><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>subscription</var>) is Object.</li><li>Let <var>subscriptionObserver</var> be <emu-xref aoid="ObjectCreate"><a href="https://tc39.github.io/ecma262/#sec-objectcreate">ObjectCreate</a></emu-xref>(%SubscriptionObserverPrototype%, «‍ [[Subscription]] »).</li><li>Set <var>subscriptionObserver</var>'s [[Subscription]] internal slot to <var>subscription</var>.</li><li>Return <var>subscriptionObserver</var>.
    </li></ol></emu-alg>
  </emu-clause>
</emu-clause>

<emu-clause id="subscription-observer-prototype-object">
  <h1><span class="secnum">5.2</span>The %SubscriptionObserverPrototype% Object<span class="utils"><span class="anchor"><a href="#subscription-observer-prototype-object">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>

  <p>All Subscription Observer objects inherit properties from the %SubscriptionObserverPrototype% intrinsic object.  The %SubscriptionObserverPrototype% object is an ordinary object and its [[Prototype]] internal slot is the <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.github.io/ecma262/#sec-properties-of-the-object-prototype-object">%ObjectPrototype%</a></emu-xref> intrinsic object. In addition, %SubscriptionObserverPrototype% has the following properties:</p>

  <emu-clause id="subscription-observer-prototype-closed">
    <h1><span class="secnum">5.2.1</span>get %SubscriptionObserverPrototype%.closed<span class="utils"><span class="anchor"><a href="#subscription-observer-prototype-closed">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>
    <emu-alg><ol><li>Let <var>O</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>O</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>O</var> does not have all of the internal slots of a Subscription Observer instance, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>subscription</var> be the value of <var>O</var>'s [[Subscription]] internal.</li><li>Return ! <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="subscription-observer-prototype-next">
    <h1><span class="secnum">5.2.2</span>%SubscriptionObserverPrototype%.next ( <var>value</var> )<span class="utils"><span class="anchor"><a href="#subscription-observer-prototype-next">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>
    <emu-alg><ol><li>Let <var>O</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>O</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>O</var> does not have all of the internal slots of a Subscription Observer instance, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>subscription</var> be the value of <var>O</var>'s [[Subscription]] internal slot.</li><li>If <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>observer</var> be the value of <var>subscription</var>'s [[Observer]] internal slot.</li><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observer</var>) is Object.</li><li>Let <var>nextMethod</var> be ? <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>observer</var>, <code>"next"</code>).</li><li>If <var>nextMethod</var> is <emu-val>undefined</emu-val>, let <var>result</var> be <emu-xref aoid="NormalCompletion"><a href="https://tc39.github.io/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>).</li><li>Return ? <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>nextMethod</var>, <var>observer</var>, « ‍<var>value</var> »).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="subscription-observer-prototype-error">
    <h1><span class="secnum">5.2.3</span>%SubscriptionObserverPrototype%.error ( <var>exception</var> )<span class="utils"><span class="anchor"><a href="#subscription-observer-prototype-error">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>
    <emu-alg><ol><li>Let <var>O</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>O</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>O</var> does not have all of the internal slots of a Subscription Observer instance, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>subscription</var> be the value of <var>O</var>'s [[Subscription]] internal slot.</li><li>If <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>) is <emu-val>true</emu-val>, return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>throw</emu-const>, [[value]]: <var>exception</var>, [[target]]: <emu-const>empty</emu-const>}.</li><li>Let <var>observer</var> be the value of <var>subscription</var>'s [[Observer]] internal slot.</li><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observer</var>) is Object.</li><li>Set <var>subscription</var>'s [[Observer]] internal slot to <emu-val>undefined</emu-val>.</li><li>Let <var>result</var> be <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>observer</var>, <code>"error"</code>).</li><li>If <var>result</var> is not an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Let <var>errorMethod</var> be <var>result</var>.[[value]].</li><li>If <var>errorMethod</var> is <emu-val>undefined</emu-val>, return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">Completion</a></emu-xref>{[[type]]: <emu-const>throw</emu-const>, [[value]]: <var>exception</var>, [[target]]: <emu-const>empty</emu-const>}.</li><li>Let <var>result</var> be <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>errorMethod</var>, <var>observer</var>, « ‍<var>value</var> »).</li></ol></li><li>Perform ? <emu-xref aoid="CleanupSubscription"><a href="#cleanup-subscription">CleanupSubscription</a></emu-xref>(<var>subscription</var>).</li><li>Return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>result</var>).
    </li></ol></emu-alg>
  </emu-clause>

  <emu-clause id="subscription-observer-prototype-complete">
    <h1><span class="secnum">5.2.4</span>%SubscriptionObserverPrototype%.complete ( <var>value</var> )<span class="utils"><span class="anchor"><a href="#subscription-observer-prototype-complete">link</a></span><span class="anchor"><a href="#" class="utils-pin">pin</a></span></span></h1>
    <emu-alg><ol><li>Let <var>O</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>O</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>O</var> does not have all of the internal slots of a Subscription Observer instance, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>subscription</var> be the value of <var>O</var>'s [[Subscription]] internal slot.</li><li>If <emu-xref aoid="SubscriptionClosed"><a href="#subscription-closed">SubscriptionClosed</a></emu-xref>(<var>subscription</var>) is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Let <var>observer</var> be the value of <var>subscription</var>'s [[Observer]] internal slot.</li><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>observer</var>) is Object.</li><li>Set <var>subscription</var>'s [[Observer]] internal slot to <emu-val>undefined</emu-val>.</li><li>Let <var>result</var> be <emu-xref aoid="GetMethod"><a href="https://tc39.github.io/ecma262/#sec-getmethod">GetMethod</a></emu-xref>(<var>observer</var>, <code>"complete"</code>).</li><li>If <var>result</var> is not an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Let <var>completeMethod</var> be <var>result</var>.[[value]].</li><li>If <var>completeMethod</var> is <emu-val>undefined</emu-val>, let <var>result</var> be <emu-xref aoid="NormalCompletion"><a href="https://tc39.github.io/ecma262/#sec-normalcompletion">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>).</li><li>Else, let <var>result</var> be <emu-xref aoid="Call"><a href="https://tc39.github.io/ecma262/#sec-call">Call</a></emu-xref>(<var>completeMethod</var>, <var>observer</var>, « <var>‍value</var> »).</li></ol></li><li>Perform ? <emu-xref aoid="CleanupSubscription"><a href="#cleanup-subscription">CleanupSubscription</a></emu-xref>(<var>subscription</var>).</li><li>Return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262/#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>result</var>).
    </li></ol></emu-alg>
  </emu-clause>

</emu-clause>
</emu-import>
</emu-clause>
</div></body>